// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
// requestAnimationFrame polyfill by Erik MÃ¶ller
// fixes from Paul Irish and Tino Zijdel
(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})();window.onload=function(){function d(){ctx.clearRect(0,0,e,t);for(var r=n.length-1;r>=0;r--){ctx.beginPath();ctx.moveTo(n[r].tlX,n[r].tlY);ctx.lineTo(n[r].trX,n[r].trY);ctx.lineTo(n[r].blX,n[r].blY);ctx.closePath();ctx.fillStyle=n[r].color1;ctx.fill();ctx.stroke();ctx.beginPath();ctx.moveTo(n[r].brX,n[r].brY);ctx.lineTo(n[r].trX,n[r].trY);ctx.lineTo(n[r].blX,n[r].blY);ctx.closePath();ctx.fillStyle=n[r].color2;ctx.fill();ctx.stroke()}}function v(){e=window.innerWidth;t=window.innerHeight;ctx.canvas.width=e;ctx.canvas.height=t;d();requestAnimationFrame(v)}function E(e){e=i*s-e;console.log(i*s);b=n[e];n[e].tlX-=20;n[e].tlY-=20;w=currentId}console.log("We are ready!");c=document.getElementById("c");ctx=c.getContext("2d");var e,t,n=[],r=80,i=6,s=6,o=i*s,u=["105B63","F4FFBE","FFD34E","DB7004","BD342D"];ctx.strokeStyle="rgba(0, 0, 0, 0.3)";for(var a=o-1;a>=0;a--){n[a]={};var f=(i-a%i)*r-r,l=(s-Math.floor(a/i))*r-r;n[a].tlX=f;n[a].tlY=l;n[a].trX=f+r;n[a].trY=l;n[a].brX=f+r;n[a].brY=l+r;n[a].blX=f;n[a].blY=l+r;var h=u[Math.floor(Math.random()*u.length)],p=u[Math.floor(Math.random()*u.length)];n[a].color1="#"+h;n[a].color2="#"+p}requestAnimationFrame(v);var m=0,g=!1,y=[];c.addEventListener("mousedown",function(){m=0;g=!0},!1);c.addEventListener("mousemove",function(e){m=1;if(g){var t=e.x/r,n=e.y/r,s=t%1,o=n%1,u=Math.ceil(s+o),a=Math.floor(n)*i+Math.ceil(t);console.log("Id: "+a+"Side:"+u);E(a)}},!1);c.addEventListener("mouseup",function(){g=!1;m===0?console.log("click"):m===1&&console.log("drag done")},!1);var b,w};