(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})();Object.prototype.clone=function(){var e=this instanceof Array?[]:{};for(var t in this){if(t==="clone")continue;this[t]&&typeof this[t]=="object"?e[t]=this[t].clone():e[t]=this[t]}return e};window.onload=function(){function v(){ctx.clearRect(0,0,t,n);for(var e=r.length-1;e>=0;e--){ctx.beginPath();ctx.moveTo(r[e].tlX,r[e].tlY);ctx.rect(r[e].tlX,r[e].tlY,i,i);ctx.closePath();ctx.fillStyle=r[e].color1;ctx.fill()}}function m(){k();v();_();for(var e=r.length-1;e>=0;e--){r[e].tlX=q(1,d[e].tlX,r[e].tlX,60);r[e].tlY=q(1,d[e].tlY,r[e].tlY,60)}requestAnimationFrame(m)}function C(e){var t=(Math.abs(e[0])+Math.abs(e[1]))/2e3;S<.06&&(S+=t)}function k(){var e=0,t=0;if(S>0&&N>.6){e=S/2;S-=e}N<1&&(t=.02);x+=e-t;var n=x/5*N*2;T=n;N=N+t-e;x-=n;ctx.scale(1-n,1-n)}function _(){var e=[];for(var t=r.length-1;t>=0;t--){var n=r[t].tlX,s=r[t].tlY;n<L?D(t):n>A&&P(t);s<-i?H(t):s>M&&B(t)}}function D(e){var t=i*s;r[e].tlX+=t;d[e].tlX+=t}function P(e){var t=i*s;r[e].tlX-=t;d[e].tlX-=t}function H(e){var t=i*s;r[e].tlY+=t;d[e].tlY+=t}function B(e){var t=i*s;r[e].tlY-=t;d[e].tlY-=t}function j(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function F(e,t,n,r){e/=r;e--;return-n*(e*e*e*e-1)+t}function I(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t}function q(e,t,n,r){return n+Math.floor((t-n)/20)}console.log("We are ready!");var e=1;$(".container").scrollLeft(100);$(".container").scrollTop(100);c=document.getElementById("c");ctx=c.getContext("2d");var t=window.innerWidth,n=window.innerHeight;ctx.canvas.width=t;ctx.canvas.height=n;window.onresize=function(e){t=window.innerWidth;n=window.innerHeight;ctx.canvas.width=t;ctx.canvas.height=n};var r=[],i=300,s=10,o=10,u=s*o,a=["105B63","F4FFBE","FFD34E","DB7004","BD342D"];ctx.strokeStyle="rgba(0, 0, 0, 0.3)";for(var f=u-1;f>=0;f--){r[f]={};var l=(s-f%s)*i-i,h=(o-Math.floor(f/s))*i-i;r[f].tlX=l;r[f].tlY=h;var p=a[Math.floor(Math.random()*a.length)];r[f].color1="#"+p}var d=r.clone();requestAnimationFrame(m);var g=0,y=!1,b=[];c.addEventListener("mousedown",function(){g=0;y=!0},!1);c.addEventListener("mousemove",function(e){g=1;if(y){var t=e.x/i,n=e.y/i,r=t%1,u=n%1,a=Math.ceil(r+u),f=Math.floor(n)*s+Math.ceil(t);f=s*o-f;console.log("Id: "+f+"Side:"+a)}},!1);c.addEventListener("mouseup",function(){y=!1;g===0?console.log("click"):g===1&&console.log("drag done")},!1);var w=!1;$(".container").on("scroll",function(t){var n=!0,i=($(".container").scrollLeft()-100)/e;i*=-1;var s=($(".container").scrollTop()-100)/e;s*=-1;$(".container").scrollLeft(100);$(".container").scrollTop(100);C([i,s]);for(var o=r.length-1;o>=0;o--){d[o].tlX+=i;d[o].tlY+=s}clearTimeout($.data(this,"scrollTimer"));$.data(this,"scrollTimer",setTimeout(function(){var e=!1;console.log("Haven't scrolled in 100ms!")},50));t.preventDefault();return!1});var E=.01,S=1e-8,x=0,T=1,N=1,L=-i,A=i*s-i,O=-i,M=i*s-i-2};